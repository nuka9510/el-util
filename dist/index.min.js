var elUtil;(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Common:()=>s,Interceptor:()=>r,JUtil:()=>i,Plugin:()=>a,SValidation:()=>n});class i{static empty(e){let t=[void 0,null,0,""].includes(e);return t||(e.constructor==Object?t=0==Object.keys(e).length&&0==Object.keys(Object.getPrototypeOf(e)).length:(e.constructor==NodeList||Array.isArray(e))&&(t=0==e.length)),t}static isNumber(e,t=!1){let i=!Number.isNaN(Number(e))&&["number","string"].includes(typeof e)&&!/^\s*$/.test(`${e}`);return i&&t&&(i="number"==typeof e),i}static isObject(e){return e?.constructor==Object}static numberFormat(e,t=0,n=".",a=","){if(!i.isNumber(e,!0)||!i.isNumber(t,!0))return null;const r=String(e).split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,a),i.empty(r[1])||(r[1]=r[1].substring(0,t)),i.empty(r[1])?r[0]:r[0].concat(n,r[1])}static strftime(e,t){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/(%{1})/g,"\\$1")).replace(/(\\%){2}/g,"%")).replace(/\\%Y/g,String(e.getFullYear()))).replace(/\\%y/g,String(e.getFullYear()).replace(/^\d+(\d{2})$/,"$1"))).replace(/\\%B/g,i[e.getMonth()])).replace(/\\%b/g,i[e.getMonth()].replace(/^(\w{3})\w*$/,"$1"))).replace(/\\%m/g,String(e.getMonth()+1).replace(/^(\d{1})$/,"0$1"))).replace(/\\%d/g,String(e.getDate()).replace(/^(\d{1})$/,"0$1"))).replace(/\\%A/g,n[e.getDay()])).replace(/\\%a/g,n[e.getDay()].replace(/^(\w{3})\w*$/,"$1"))).replace(/\\%H/g,String(e.getHours()).replace(/^(\d{1})$/,"0$1"))).replace(/\\%I/g,String(e.getHours()>12?e.getHours()-12:e.getHours()).replace(/^0$/,"12").replace(/^(\d{1})$/,"0$1"))).replace(/\\%p/g,e.getHours()<12?"AM":"PM")).replace(/\\%M/g,String(e.getMinutes()).replace(/^(\d{1})$/,"0$1"))).replace(/\\%S/g,String(e.getSeconds()).replace(/^(\d{1})$/,"0$1"))}static checkdate(e,t,i){const n=new Date(e,t-1,i);return n.getFullYear()==e&&n.getMonth()+1==t&&n.getDate()==i}static equaldate(e,t=new Date){return i.strftime(e,"%Y-%m-%d")==i.strftime(t,"%Y-%m-%d")}static getWeek(e,t=!0){const i=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"][e.getDay()];return t?i:i.replace(/^([ㄱ-ㅎㅏ-ㅣ가-힣]{1})[ㄱ-ㅎㅏ-ㅣ가-힣]+$/,"$1")}static addDate(e,t){return new Date(e.getFullYear()+(i.isNumber(t.year,!0)?t.year:0),e.getMonth()+(i.isNumber(t.month,!0)?t.month:0),e.getDate()+(i.isNumber(t.day,!0)?t.day:0),e.getHours()+(i.isNumber(t.hour,!0)?t.hour:0),e.getMinutes()+(i.isNumber(t.minute,!0)?t.minute:0),e.getSeconds()+(i.isNumber(t.second,!0)?t.second:0),e.getMilliseconds()+(i.isNumber(t.millisecond,!0)?t.millisecond:0))}static subDate(e,t){return new Date(e.getFullYear()-(i.isNumber(t.year,!0)?t.year:0),e.getMonth()-(i.isNumber(t.month,!0)?t.month:0),e.getDate()-(i.isNumber(t.day,!0)?t.day:0),e.getHours()-(i.isNumber(t.hour,!0)?t.hour:0),e.getMinutes()-(i.isNumber(t.minute,!0)?t.minute:0),e.getSeconds()-(i.isNumber(t.second,!0)?t.second:0),e.getMilliseconds()-(i.isNumber(t.millisecond,!0)?t.millisecond:0))}static xor(e,t){return!(e&&t)&&(e||t)}static formDataToJson(e){return JSON.stringify(Object.fromEntries([...new Set(e.keys())].map(((...t)=>[t[0],e.getAll(t[0]).length>1?e.getAll(t[0]):e.get(t[0])]))))}static percentage(e,t){return e*(t/100)}static ratio(e,t,i=!0){const n=i?[1,0]:[0,1];return t*e[n[0]]/e[n[1]]}static arithmeticSequence(e,t,i,n){return e+(n-t)*i}static geometricSequence(e,t,i,n){return e/i**(t-1)*i**(n-1)}static decimalAdjust(e,t,i=0){const[n,a="0"]=t.toString().split("e"),r=Math[e](Number(`${n}e${parseInt(a)+i}`)),[s,l="0"]=r.toString().split("e");return Number(`${s}e${parseInt(l)-i}`)}static encodeHtmlEntity(e){const t=document.createElement("textarea");return t.innerText=e,t.innerHTML}static decodeHtmlEntity(e){const t=document.createElement("textarea");return t.innerHTML=e,t.innerText}static copy(e){if(i.isObject(e)){const t={};for(const n in e)t[n]=i.copy(e[n]);return t}if(Array.isArray(e)){const t=[];for(const n of e)t.push(i.copy(n));return t}return e}static numRange(e,t){let i=t-e;const n=i>0;return i=Math.abs(i)+1,[...new Array(i)].map(((...t)=>t[1]*(n?1:-1)+e))}static arrayChunk(e,t){if(!i.isNumber(t,!0))throw new TypeError("size는 숫자 타입 이어야 합니다.");if(t<=0&&Number.isInteger(t))throw new RangeError("size는 0보다 큰 정수여야 합니다.");const n=[];return i.numRange(0,i.decimalAdjust("ceil",e.length/t)+(e.length>0?-1:0)).forEach(((...i)=>{n.push(e.slice(i[0]*t,(i[0]+1)*t))})),n}static get(e,t){return t(e)}static getOrElse(e,t,i=e=>e){return i(e)??t}}class n{result;#e;#t;#i;constructor(e){this.init(e)}init(e=null){this.#n(),this.#a(),this.#r(),this.#s(e?.regex)}#n(){this.result={flag:!0,alertMsg:null,el:null}}#a(){this.#e={}}#r(){this.#t={}}#s(e=null){this.#i=!i.empty(e)&&i.isObject(e)?{...this.#i,...e}:{...this.#i}}#l(e){const t=e.getAttribute("required");i.empty(t)||("radio"==e.type?this.#o(e):i.empty(e.value)&&(this.result.flag=!1,this.result.alertMsg=`'${t}'을/를 입력해 주세요.`,this.result.el=e))}#c(){for(const e in this.#t){const t=this.#t[e][0];if(!this.#t[e].some(((...e)=>e[0].checked))){this.result.flag=!1,this.result.alertMsg=`'${e}'을/를 선택해주세요.`,this.result.el=t;break}}}#u(e){const t=e.dataset.svPattern,n=e.dataset.svDate;if(i.empty(t)||(i.empty(this.#e.el)&&(this.#e.el=[]),this.#e.el?.push(e)),!i.empty(n)){const t=e.dataset.svDateState;switch(t){case"S":case"E":i.empty(this.#e.date)&&(this.#e.date={}),i.empty(this.#e.date[n])&&(this.#e.date[n]={}),this.#e.date[n][t]=e}}}#o(e){const t=e.getAttribute("required");i.empty(t)||(i.empty(this.#t[t])?this.#t[t]=[e]:this.#t[t].push(e))}#d(){for(const e in this.#e){if(!this.result.flag)break;switch(e){case"date":this.#h(this.#e[e]);break;case"el":this.#g(this.#e[e])}}}#h(e){for(const t in e){if(!this.result.flag)break;{const n=e[t].S.value,a=e[t].E.value;if(!i.empty(n)&&!i.empty(a)){const i=e[t].S.dataset.svInputName||e[t].E.dataset.svInputName,r=e[t].S.getAttribute("required")||e[t].E.getAttribute("required");new Date(n).getTime()>new Date(a).getTime()&&(this.result.flag=!1,this.result.alertMsg=`'${i||r}'의 시작일이 종료일 보다 늦습니다.`,this.result.el=e[t].S)}}}}#g(e){if(Array.isArray(e))for(const t of e){const e=t.dataset.svPattern,n=t.dataset.svInputName,a=t.getAttribute("required"),r=t.value;if(Object.keys(this.#i).includes(e)&&!i.empty(r)&&!this.#i[e].test(r)){this.result.flag=!1,this.result.alertMsg=`'${n||a}'의 형식이 올바르지 않습니다.`,this.result.el=t;break}}else{const t=e.dataset.svPattern,n=e.dataset.svInputName,a=e.getAttribute("required"),r=e.value;Object.keys(this.#i).includes(t)&&(i.empty(r)||this.#i[t].test(r)||(this.result.flag=!1,this.result.alertMsg=`'${n||a}'의 형식이 올바르지 않습니다.`,this.result.el=e))}}#m(){for(const e in this.#e)if("el"==e&&this.result.flag)for(const t of this.#e[e]){const e=t.dataset.svInputName,i=t.getAttribute("required"),n=t.value.length;if(!(t instanceof HTMLSelectElement))if(t.minLength>=0&&t.maxLength>=0){if(n<t.minLength||n>t.maxLength){this.result.flag=!1,this.result.alertMsg=`'${e||i}'은/는 ${t.minLength}~${t.maxLength}자 이내로 입력해주세요.`,this.result.el=t;break}}else if(t.minLength>=0&&t.maxLength<0){if(n<t.minLength){this.result.flag=!1,this.result.alertMsg=`'${e||i}'은/는 ${t.minLength}자 이상으로 입력해주세요.`,this.result.el=t;break}}else if(t.minLength<0&&t.maxLength>=0&&n>t.maxLength){this.result.flag=!1,this.result.alertMsg=`'${e||i}'은/는 ${t.maxLength}자 이하로 입력해주세요.`,this.result.el=t;break}}else if(!this.result.flag)break}run(e){this.init();for(const t of e.elements){if(!this.result.flag)break;["INPUT","SELECT","TEXTAREA"].includes(t.tagName)&&(t.disabled||(this.#l(t),this.#u(t)))}this.result.flag&&this.#c(),this.result.flag&&this.#d(),this.result.flag&&this.#m()}}class a{static#p=[];static get plugin(){return i.copy(a.#p)}static appendPlugin(e){a.#p.push(e)}}class r{static#y=[];static get interceptor(){return i.copy(r.#y)}static appendInterceptor(e){r.#y.push(e)}static actionHandle(e,t,n){return async a=>{let s=a.target;if(!i.empty(t)){if(!(a.target instanceof HTMLElement))return;if(s=a.target.closest(`[data-eu-action~="${t}"]`),i.empty(s))return;if(n&&!(s.getAttribute("data-eu-event")??"").split(" ").includes(a.type))return}const l=r.interceptor.map(((...e)=>e[0].preHandle)),o=r.interceptor.map(((...e)=>e[0].postHandle));for(const e of l)if(!(e?.(a,s)??1))return;await e(a,s),o.forEach(((...e)=>e[0]?.(a,s)))}}}class s{#f=!1;get isInit(){return this.#f}#b;#v={reg:"등록하시겠습니까?",mod:"수정하시겠습니까?",del:"삭제하시겠습니까?"};#w;get#A(){return{"prevent-default":[{callback:this.#k}],"stop-propagation":[{callback:this.#E}],get:[{callback:this.#S}],post:[{callback:this.#$}],"sub-select":[{event:"change",callback:this.#N}],"check-all":[{event:"click",callback:this.#M,option:{capture:!0}}],"win-open":[{event:"click",callback:this.#O}],"win-close":[{event:"click",callback:this.#C}],"number-only":[{event:"keydown",callback:this.#_},{event:"input",callback:this.#L},{event:"blur",callback:this.#I}],clipboard:[{event:"click",callback:this.#P}],check:[{event:"click",callback:this.#x}]}}#D;get#T(){return[{event:"child-close",callback:this.#q}]}form;validation;get action(){return{}}get windowAction(){return[]}get allAction(){const e=a.plugin.filter(((...e)=>i.empty(e[0].target)||e[0].target.includes(this))),t={...this.#A,...e.reduce(((...e)=>({...e[0],...e[1].plugin.action})),{}),...this.action},n=[...this.#T,...e.reduce(((...e)=>[...e[0],...e[1].plugin.windowAction]),[]),...this.windowAction];let r={};for(const e in t)for(const n of t[e].values())i.empty(n.event)&&(r[e]=[...r[e]??[],n]);const s=Object.keys(r);if(!i.empty(s)){document.querySelectorAll(`[data-eu-action~="${s.join('"], [data-eu-action~="')}"]`).forEach(((...e)=>{if(!e[0].hasAttribute("data-eu-event"))return;const t=e[0].getAttribute("data-eu-event").split(" ");e[0].getAttribute("data-eu-action").split(" ").filter(((...e)=>s.includes(e[0]))).forEach(((...e)=>{r[e[0]].forEach(((...i)=>{r[e[0]][i[1]]={...i[0],event:[...i[0].event??[],...t.filter(((...e)=>!(i[0].event??[]).includes(e[0])))],flag:!0}}))}))}));for(const e in r)t[e]=[...t[e].filter(((...e)=>!i.empty(e[0].event))),...r[e]]}return{action:t,windowAction:n}}constructor(e){const t=this.addEvent.bind(this),i=this.removeEvent.bind(this),a=this.init.bind(this);this.addEvent=()=>{this.#j(),t()},this.removeEvent=()=>{this.#H(),i()},this.init=()=>{a(),this.#F(),this.addEvent(),this.init=()=>{a(),this.addEvent()},this.#f=!0},this.validation=new n(e)}init(){}#F(){const e=this.allAction;this.#w=e.action,this.#D=e.windowAction;for(const e in this.#w)this.#w[e].forEach(((...t)=>{t[0].callback=r.actionHandle(t[0].callback.bind(this),e,t[0].flag).bind(this)}));this.#D.forEach(((...e)=>{this.#D[e[1]]={...e[0],callback:r.actionHandle(e[0].callback.bind(this)).bind(this)}}))}addEvent(){}#j(){for(const e in this.#w)this.#w[e].forEach(((...e)=>{i.empty(e[0].event)||(Array.isArray(e[0].event)?e[0].event.forEach(((...t)=>window.addEventListener(t[0],e[0].callback,e[0].option))):window.addEventListener(e[0].event,e[0].callback,e[0].option))}));this.#D.forEach(((...e)=>{i.empty(e[0].event)||(Array.isArray(e[0].event)?e[0].event.forEach(((...t)=>window.addEventListener(t[0],e[0].callback,e[0].option))):window.addEventListener(e[0].event,e[0].callback,e[0].option))}))}removeEvent(){}#H(){for(const e in this.#w)this.#w[e].forEach(((...e)=>{i.empty(e[0].event)||(Array.isArray(e[0].event)?e[0].event.forEach(((...t)=>window.removeEventListener(t[0],e[0].callback,e[0].option))):window.removeEventListener(e[0].event,e[0].callback,e[0].option))}));this.#D.forEach(((...e)=>{i.empty(e[0].event)||(Array.isArray(e[0].event)?e[0].event.forEach(((...t)=>window.removeEventListener(t[0],e[0].callback,e[0].option))):window.removeEventListener(e[0].event,e[0].callback,e[0].option))}))}#k(e,t){e.preventDefault()}#E(e,t){e.stopPropagation()}async onGetBefore(e,t){}async onGetAfter(e,t){}async#S(e,t){await this.onGetBefore(e,t).then((async n=>{i.empty(this.form)?(n??1)&&(location.href=t.dataset.euUrl):(this.validation.init(),(n??1)&&("Y"==(t.dataset.euValidation??"Y")&&this.validation.run(this.form),this.validation.result.flag?(this.form.action=t.dataset.euUrl,this.form.submit()):(await this.onGetAfter(e,t),alert(this.validation.result.alertMsg),this.validation.result.el?.focus())))}))}async onPostBefore(e,t){}async onPostAfter(e,t){}async#$(e,t){await this.onPostBefore(e,t).then((async n=>{let a=!0;this.validation.init(),(n??1)&&(i.empty(t.dataset.euMsg||t.dataset.euState)||confirm(t.dataset.euMsg||this.#v[t.dataset.euState]))?("Y"==(t.dataset.euValidation??("del"==t.dataset.euState?"N":"Y"))&&this.validation.run(this.form),this.validation.result.flag?(this.form.action=`${t.dataset.euUrl}${location.search}`,this.form.submit()):(await this.onPostAfter(e,t),alert(this.validation.result.alertMsg),this.validation.result.el?.focus())):a=!1,a||await this.onPostAfter(e,t)}))}async onSubSelectAfter(e,t){}#N(e,t){document.querySelectorAll(`select[data-eu-name="${t.dataset.euTarget}"]`).forEach((async(...n)=>{n[0].querySelectorAll("option").forEach(((...e)=>{i.empty(e[0].value)||e[0].style.setProperty("display",t.value==e[0].dataset.euMain?"block":"none")})),n[0].value="",await this.onSubSelectAfter(e,t),n[0].dispatchEvent(new Event("change"))}))}async onCheckAllAfter(e,t){}async#M(e,t){document.querySelectorAll(`input[type="checkbox"][data-eu-name="${t.dataset.euTarget}"]`).forEach(((...e)=>{e[0].checked=t.checked})),await this.onCheckAllAfter(e,t)}#O(e,t){if(!i.empty(t.dataset.euOption)){const e=/^https?:/.test(t.dataset.euUrl)?new URL(t.dataset.euUrl):new URL(t.dataset.euUrl,location.origin),n=JSON.parse(document.querySelector(`script[data-eu-name="win-open"][data-eu-id="${t.dataset.euOption}"]`)?.innerText??"{}");if(!i.empty(t.dataset.euForm)){const i=document.querySelector(`form${t.dataset.euForm}`),n=new URLSearchParams(new FormData(i));e.search=`${e.search||"?"}${e.search&&"&"}${n}`}let a="";"center"===n?.pos&&(n.top=(screen.height-n.height)/2,n.left=(screen.width-n.width)/2);for(const e in n)["name","pos"].includes(e)||(i.empty(a)||(a+=", "),a+=`${e}=${n[e]}`);if(i.empty(n.name))window.open(e,void 0,a);else{const t=window.open(e,n.name,a);this.#b=i.empty(this.#b)?{[n.name]:t}:{...this.#b,[n.name]:t}}}}#C(e,t){window.close()}#_(e,t){229==e.keyCode?(t.event_key_code=e.keyCode,t.prev_value=t.value,t.prev_selection=t.selectionStart):(delete t.event_key_code,delete t.prev_value,delete t.prev_selection)}#L(e,t){229==t.event_key_code&&(e.isComposing?(delete t.event_key_code,delete t.prev_value,delete t.prev_selection):(t.value=t.prev_value,t.selectionStart=t.prev_selection)),null!=e.data&&({A:/[\d]/,B:/[\d\.\-]/,C:/[\d\.]/}[t.dataset.euType??"A"].test(e.data)||i.empty(t.selectionStart)||(t.selectionStart-=1)),this.#U(e,t)}#I(e,t){this.#U(e,t)}#U(e,t){const n=t.dataset.euType??"A",a=t.dataset.euMin,r=t.dataset.euMax;let s,l=t.selectionStart;if("C"==n){const e=t.value.split(".");l=t.selectionStart-[...t.value.matchAll(/,/g)].length,t.value=e[0],s=e.filter(((e,t,i)=>t>0)).join("").substring(0,parseInt(t.dataset.euDecimal??"0")),s=`${i.empty(s)?"":"."}${s}`}if(t.value=t.value.replace({A:/[^\d]/g,B:/[^\d\.\-]/g,C:/[^\d]/g}[n],""),!("C"!=n||i.empty(t.value)&&i.empty(s))){const e=parseInt(t.value||"0");t.value=`${i.numberFormat(e)}${s}`,l+=[...t.value.matchAll(/,/g)].length}if(i.isNumber(a)||i.isNumber(r)){let e,s,o=!1;if(e=Number("C"==n?t.value.replace(/,/g,""):t.value),!o&&i.isNumber(a)&&(i.empty(t.value)||e<Number(a))&&(s=Number(a),o=!0),!o&&i.isNumber(r)&&e>Number(r)&&(s=Number(r),o=!0),o){let e;e="C"==n?i.numberFormat(s,parseInt(t.dataset.euDecimal??"0")):`${s}`,l-=t.value.length-e.length,t.value=e}}i.empty(t.selectionEnd)||(t.selectionEnd=l)}async#P(e,t){await navigator.clipboard.writeText(t.dataset.euValue).then((e=>{alert("링크가 클립보드에 저장되었습니다.")})).catch((e=>{console.error(e)}))}async onCheckAfter(e,t){}async#x(e,t){const i=document.querySelector(`input[data-eu-name="${t.dataset.euTarget}"]`);i.value=t.checked?i.dataset.euTrue:i.dataset.euFalse,await this.onCheckAfter(e,t)}static childCloseEvent(e){return new CustomEvent("child-close",e)}async onChildClose(e,t){}async#q(e,t){await this.onChildClose(e,t),(e.detail.reload??1)&&location.reload()}}elUtil=t})();